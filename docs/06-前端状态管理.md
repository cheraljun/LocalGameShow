# 前端状态管理

## StateManager - SPA 核心

`StateManager` 是整个前端应用的唯一状态源，负责：
- 管理所有页面状态
- 驱动主内容区渲染
- 处理 Hash 路由
- 支持浏览器前进后退

## 核心机制

```javascript
class StateManager {
    constructor() {
        this.currentType = null;
        this.states = { announcement: null, game: null, chat: null };
        this.listeners = [];
    }
    
    notify() {
        const state = this.getCurrentState();
        this.listeners.forEach(listener => listener(state));
    }
}
```

## Hash 路由设计

**URL 格式**：
- 列表页：`#/game/list`
- 详情页：`#/game/detail/20240101120000000000`
- 特殊页：`#/game/my`

**双向同步**：
- 状态变更 → 更新 URL
- URL 变更 → 更新状态

**支持特性**：直接访问链接、浏览器前进后退、页面分享
