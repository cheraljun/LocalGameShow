# 用户管理

## 用户数据模型

```python
{
  "id": "001",                      # 递增ID
  "email": "user@example.com",      # 邮箱（唯一）
  "username": "用户001",             # 昵称（可修改）
  "password_hash": "sha256...",     # 密码哈希
  "role": "user" | "admin",         # 角色
  "folder": "uuid-hex-string",      # 文件夹名
  "is_active": true,                # 账户状态
  "created_at": "ISO8601",          # 创建时间
  "last_login": "ISO8601"           # 最后登录
}
```

## 密码加密

使用 Python 标准库 `hashlib.sha256`：

```python
def hash_password(password: str) -> str:
    return hashlib.sha256(password.encode('utf-8')).hexdigest()
```

**原则**：
- 管理员不能设置密码（只能验证码登录）
- 普通用户可以同时使用密码和验证码

## 用户文件夹结构

```
data/users/{uuid}/
├── profile.json         # 用户资料
├── drafts/game.json     # 游戏草稿
├── published/game.json  # 已发布游戏
├── games/               # HTML游戏文件
└── images/              # 缩略图
```
