# 双存储模型

## 设计理念

草稿区和发布区完全分离，互不干扰。

## 数据结构

```
用户游戏数据：
data/users/{user_folder}/
├── drafts/game.json         # 草稿区
└── published/game.json      # 发布区

系统内容数据：
data/system/
├── announcement_drafts.json     # 公告草稿
├── announcement_published.json  # 公告发布
├── bulletin_drafts.json         # 通告草稿
└── bulletin_published.json      # 通告发布
```

## 操作语义

| 操作 | 草稿区 | 发布区 | 效果 |
|------|--------|--------|------|
| 上传 | 写入 | - | 保存为草稿 |
| 发布 | 保留 | 复制 | 两区都有 |
| 删除 | 删除 | 删除 | 彻底删除 |
| 编辑 | 修改 | - | 只改草稿 |

## 核心原则

1. **发布不删除草稿** - 允许继续编辑
2. **删除同时删除两边** - 保证一致性
3. **编辑只影响草稿** - 已发布内容不变
4. **用户只看发布区** - 草稿对外不可见

**优势**：用户可以安全编辑已发布内容，支持版本回退，草稿和发布互不影响
